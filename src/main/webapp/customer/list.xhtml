<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" 
	xmlns:o="http://omnifaces.org/ui"
	template="/templates/main.xhtml">
	
	<ui:define name="title">Customers</ui:define>
	<ui:define name="pageContent">
		<h:form id="customerForm">
			<table jsf:id="customerFormDataTable" class="mdl-data-table mdl-js-data-table">
			  <thead>
			    <tr>
			      <th class="mdl-data-table__cell--non-numeric">Code</th>
			      <th class="mdl-data-table__cell--non-numeric">Name</th>
			      <th class="mdl-data-table__cell--non-numeric">Store Type</th>
			      <th class="mdl-data-table__cell--non-numeric">Distributor</th>
			      <th>
			      	<h:commandLink value="Add"
			      		action="#{customerListBackingBean.createNewInPropertiesPage()}" 
			      		styleClass="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
			      	</h:commandLink>
						
				</th>
			    </tr>
			  </thead>
			  <tbody >
			  	<ui:repeat var="customer" value="#{customerListBackingBean.list}">
			  	<tr>
			  		<td class="mdl-data-table__cell--non-numeric">#{customer.code}</td>
			  		<td class="mdl-data-table__cell--non-numeric">#{customer.name}</td>
			  		<td class="mdl-data-table__cell--non-numeric">#{customer.storeType.code}</td>
			  		<td class="mdl-data-table__cell--non-numeric">#{customer.distributor.code}</td>
			  		<td>
			  			<button id="demo-menu-lower-left#{customer.idNo}" jsf:rendered="true" class="mdl-button mdl-js-button mdl-button--icon" >
						  <i class="material-icons">more_vert</i>
						  <f:ajax/>
						</button>
						
						<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
						    for="demo-menu-lower-left#{customer.idNo}">
						  <li class="mdl-menu__item">
						  	<h:commandLink action="#{customerListBackingBean.editInPropertiesPage(customer)}" 
						  		value="Edit" >
						  	</h:commandLink>
						  </li>
						  <li class="mdl-menu__item">
						  	<h:commandLink 
						  		action="#{customerListBackingBean.setUpdateMode('delete')}" 
						  		value="Delete"
						  		styleClass="modal__trigger"
						  		pt:data-modal="#modal">
						  		<f:setPropertyActionListener value="#{customer}" target="#{customerListBackingBean.customer}" />
						  		<f:ajax render=":customerForm:confirmationMessage"/>
						  	</h:commandLink>
						  </li>
						</ul>
			  		</td>
			  	</tr>
		   		</ui:repeat>
			  </tbody>
			</table>
			
			<div id="modal" class="modal modal__bg">
				<div class="modal__dialog">
					<div class="modal__content">
	
	
						<div class="modal__text">
							<p>
								<h:outputText id="confirmationMessage" value="Are you sure you want to delete #{customerListBackingBean.customer.code}?" />
							</p>
						</div>
	
						<div class="modal__footer">
							<h:commandLink action="#{customerListBackingBean.delete()}" value="Delete"
								styleClass="mdl-button mdl-button--colored mdl-js-button" />
							<a class="mdl-button mdl-button--colored mdl-js-button modal__close">Close</a>
						</div>
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>